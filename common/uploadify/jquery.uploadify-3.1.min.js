var swfobject=function(){var l="undefined",T="object",A="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",S="application/x-shockwave-flash",z="SWFObjectExprInst",f="onreadystatechange",w=window,L=document,V=navigator,B=false,a=[J],Q=[],v=[],q=[],N,y,m,j,r=false,C=false,P,o,O=true,u=function(){var ah=typeof L.getElementById!=l&&typeof L.getElementsByTagName!=l&&typeof L.createElement!=l,ad=V.userAgent.toLowerCase(),af=V.platform.toLowerCase(),aa=af?/win/.test(af):/win/.test(ad),Y=af?/mac/.test(af):/mac/.test(ad),ab=/webkit/.test(ad)?parseFloat(ad.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ae=!+"1",ac=[0,0,0],X=null;if(typeof V.plugins!=l&&typeof V.plugins[A]==T){X=V.plugins[A].description;if(X&&!(typeof V.mimeTypes!=l&&V.mimeTypes[S]&&!V.mimeTypes[S].enabledPlugin)){B=true;ae=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ac[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ac[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ac[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof w.ActiveXObject!=l){try{var Z=new ActiveXObject(e);if(Z){X=Z.GetVariable("$version");if(X){ae=true;X=X.split(" ")[1].split(",");ac=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ag){}}}return{w3:ah,pv:ac,wk:ab,ie:ae,win:aa,mac:Y}}(),M=function(){if(!u.w3){return}if(typeof L.readyState!=l&&L.readyState=="complete"||typeof L.readyState==l&&(L.getElementsByTagName("body")[0]||L.body)){H()}if(!r){if(typeof L.addEventListener!=l){L.addEventListener("DOMContentLoaded",H,false)}if(u.ie&&u.win){L.attachEvent(f,function(){if(L.readyState=="complete"){L.detachEvent(f,arguments.callee);H()}});if(w==top){(function(){if(r){return}try{L.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}H()})()}}if(u.wk){(function(){if(r){return}if(!/loaded|complete/.test(L.readyState)){setTimeout(arguments.callee,0);return}H()})()}U(H)}}();function H(){if(r){return}try{var X=L.getElementsByTagName("body")[0].appendChild(k("span"));X.parentNode.removeChild(X)}catch(Y){return}r=true;var Z=a.length;for(var aa=0;aa<Z;aa++){a[aa]()}}function s(X){if(r){X()}else{a[a.length]=X}}function U(Y){if(typeof w.addEventListener!=l){w.addEventListener("load",Y,false)}else{if(typeof L.addEventListener!=l){L.addEventListener("load",Y,false)}else{if(typeof w.attachEvent!=l){K(w,"onload",Y)}else{if(typeof w.onload=="function"){var X=w.onload;w.onload=function(){X();Y()}}else{w.onload=Y}}}}}function J(){if(B){c()}else{p()}}function c(){var Z=L.getElementsByTagName("body")[0];var X=k(T);X.setAttribute("type",S);var Y=Z.appendChild(X);if(Y){var aa=0;(function(){if(typeof Y.GetVariable!=l){var ab=Y.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");u.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(aa<10){aa++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;p()})()}else{p()}}function p(){var ac=Q.length;if(ac>0){for(var ab=0;ab<ac;ab++){var ag=Q[ab].id;var X=Q[ab].callbackFn;var ai={success:false,id:ag};if(u.pv[0]>0){var aa=E(ag);if(aa){if(n(Q[ab].swfVersion)&&!(u.wk&&u.wk<312)){d(ag,true);if(X){ai.success=true;ai.ref=h(ag);X(ai)}}else{if(Q[ab].expressInstall&&i()){var ae={};ae.data=Q[ab].expressInstall;ae.width=aa.getAttribute("width")||"0";ae.height=aa.getAttribute("height")||"0";if(aa.getAttribute("class")){ae.styleclass=aa.getAttribute("class")}if(aa.getAttribute("align")){ae.align=aa.getAttribute("align")}var ad={};var af=aa.getElementsByTagName("param");var Y=af.length;for(var Z=0;Z<Y;Z++){if(af[Z].getAttribute("name").toLowerCase()!="movie"){ad[af[Z].getAttribute("name")]=af[Z].getAttribute("value")}}x(ae,ad,ag,X)}else{R(aa);if(X){X(ai)}}}}}else{d(ag,true);if(X){var ah=h(ag);if(ah&&typeof ah.SetVariable!=l){ai.success=true;ai.ref=ah}X(ai)}}}}}function h(X){var Z=null;var aa=E(X);if(aa&&aa.nodeName=="OBJECT"){if(typeof aa.SetVariable!=l){Z=aa}else{var Y=aa.getElementsByTagName(T)[0];if(Y){Z=Y}}}return Z}function i(){return !C&&n("6.0.65")&&(u.win||u.mac)&&!(u.wk&&u.wk<312)}function x(ab,ad,Z,ac){C=true;m=ac||null;j={success:false,id:Z};var Y=E(Z);if(Y){if(Y.nodeName=="OBJECT"){N=I(Y);y=null}else{N=Y;y=Z}ab.id=z;if(typeof ab.width==l||!/%$/.test(ab.width)&&parseInt(ab.width,10)<310){ab.width="310"}if(typeof ab.height==l||!/%$/.test(ab.height)&&parseInt(ab.height,10)<137){ab.height="137"}L.title=L.title.slice(0,47)+" - Flash Player Installation";var X=u.ie&&u.win?"ActiveX":"PlugIn",ae="MMredirectURL="+w.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+L.title;if(typeof ad.flashvars!=l){ad.flashvars+="&"+ae}else{ad.flashvars=ae}if(u.ie&&u.win&&Y.readyState!=4){var aa=k("div");Z+="SWFObjectNew";aa.setAttribute("id",Z);Y.parentNode.insertBefore(aa,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}W(ab,ad,Z)}}function R(Y){if(u.ie&&u.win&&Y.readyState!=4){var X=k("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(I(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(I(Y),Y)}}function I(X){var ab=k("div");if(u.win&&u.ie){ab.innerHTML=X.innerHTML}else{var aa=X.getElementsByTagName(T)[0];if(aa){var Y=aa.childNodes;if(Y){var Z=Y.length;for(var ac=0;ac<Z;ac++){if(!(Y[ac].nodeType==1&&Y[ac].nodeName=="PARAM")&&!(Y[ac].nodeType==8)){ab.appendChild(Y[ac].cloneNode(true))}}}}}return ab}function W(ae,ac,ag){var af,ai=E(ag);if(u.wk&&u.wk<312){return af}if(ai){if(typeof ae.id==l){ae.id=ag}if(u.ie&&u.win){var ad="";for(var aa in ae){if(ae[aa]!=Object.prototype[aa]){if(aa.toLowerCase()=="data"){ac.movie=ae[aa]}else{if(aa.toLowerCase()=="styleclass"){ad+=' class="'+ae[aa]+'"'}else{if(aa.toLowerCase()!="classid"){ad+=" "+aa+'="'+ae[aa]+'"'}}}}}var ab="";for(var Z in ac){if(ac[Z]!=Object.prototype[Z]){ab+='<param name="'+Z+'" value="'+ac[Z]+'" />'}}ai.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ad+">"+ab+"</object>";v[v.length]=ae.id;af=E(ae.id)}else{var ah=k(T);ah.setAttribute("type",S);for(var Y in ae){if(ae[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){ah.setAttribute("class",ae[Y])}else{if(Y.toLowerCase()!="classid"){ah.setAttribute(Y,ae[Y])}}}}for(var X in ac){if(ac[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){G(ah,X,ac[X])}}ai.parentNode.replaceChild(ah,ai);af=ah}}return af}function G(X,Z,aa){var Y=k("param");Y.setAttribute("name",Z);Y.setAttribute("value",aa);X.appendChild(Y)}function g(Y){var X=E(Y);if(X&&X.nodeName=="OBJECT"){if(u.ie&&u.win){X.style.display="none";(function(){if(X.readyState==4){D(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function D(Y){var X=E(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function E(Y){var Z=null;try{Z=L.getElementById(Y)}catch(X){}return Z}function k(X){return L.createElement(X)}function K(Y,Z,X){Y.attachEvent(Z,X);q[q.length]=[Y,Z,X]}function n(Y){var X=u.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return X[0]>Z[0]||X[0]==Z[0]&&X[1]>Z[1]||X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]?true:false}function b(X,aa,Y,ad){if(u.ie&&u.mac){return}var ab=L.getElementsByTagName("head")[0];if(!ab){return}var Z=Y&&typeof Y=="string"?Y:"screen";if(ad){P=null;o=null}if(!P||o!=Z){var ac=k("style");ac.setAttribute("type","text/css");ac.setAttribute("media",Z);P=ab.appendChild(ac);if(u.ie&&u.win&&typeof L.styleSheets!=l&&L.styleSheets.length>0){P=L.styleSheets[L.styleSheets.length-1]}o=Z}if(u.ie&&u.win){if(P&&typeof P.addRule==T){P.addRule(X,aa)}}else{if(P&&typeof L.createTextNode!=l){P.appendChild(L.createTextNode(X+" {"+aa+"}"))}}}function d(Y,Z){if(!O){return}var X=Z?"visible":"hidden";if(r&&E(Y)){E(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function t(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=l?encodeURIComponent(X):X}var F=function(){if(u.ie&&u.win){window.attachEvent("onunload",function(){var Y=q.length;for(var X=0;X<Y;X++){q[X][0].detachEvent(q[X][1],q[X][2])}var ab=v.length;for(var ac=0;ac<ab;ac++){g(v[ac])}for(var aa in u){u[aa]=null}u=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,ab,X){if(u.w3&&Y&&Z){var aa={};aa.id=Y;aa.swfVersion=Z;aa.expressInstall=ab;aa.callbackFn=X;Q[Q.length]=aa;d(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(u.w3){return h(X)}},embedSWF:function(X,ad,aa,ac,af,ah,ag,Z,ab,Y){var ae={success:false,id:ad};if(u.w3&&!(u.wk&&u.wk<312)&&X&&ad&&aa&&ac&&af){d(ad,false);s(function(){aa+="";ac+="";var ak={};if(ab&&typeof ab===T){for(var am in ab){ak[am]=ab[am]}}ak.data=X;ak.width=aa;ak.height=ac;var an={};if(Z&&typeof Z===T){for(var al in Z){an[al]=Z[al]}}if(ag&&typeof ag===T){for(var aj in ag){if(typeof an.flashvars!=l){an.flashvars+="&"+aj+"="+ag[aj]}else{an.flashvars=aj+"="+ag[aj]}}}if(n(af)){var ai=W(ak,an,ad);if(ak.id==ad){d(ad,true)}ae.success=true;ae.ref=ai}else{if(ah&&i()){ak.data=ah;x(ak,an,ad,Y);return}else{d(ad,true)}}if(Y){Y(ae)}})}else{if(Y){Y(ae)}}},switchOffAutoHideShow:function(){O=false},ua:u,getFlashPlayerVersion:function(){return{major:u.pv[0],minor:u.pv[1],release:u.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(Y,X,Z){if(u.w3){return W(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,aa){if(u.w3&&i()){x(X,Y,Z,aa)}},removeSWF:function(X){if(u.w3){g(X)}},createCSS:function(X,Y,aa,Z){if(u.w3){b(X,Y,aa,Z)}},addDomLoadEvent:s,addLoadEvent:U,getQueryParamValue:function(X){var Y=L.location.search||L.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return t(Y)}var aa=Y.split("&");for(var Z=0;Z<aa.length;Z++){if(aa[Z].substring(0,aa[Z].indexOf("="))==X){return t(aa[Z].substring(aa[Z].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(C){var X=E(z);if(X&&N){X.parentNode.replaceChild(N,X);if(y){d(y,true);if(u.ie&&u.win){N.style.display="block"}}if(m){m(j)}}C=false}}}}();var SWFUpload;if(SWFUpload==undefined){SWFUpload=function(a){this.initSWFUpload(a)}}SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(a){delete SWFUpload.instances[this.movieName];throw a}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){if(typeof b!=="string"||b.match(/^https?:\/\//i)||b.match(/^\//)){return b}var a=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var c=window.location.pathname.lastIndexOf("/");if(c<=0){path="/"}else{path=window.location.pathname.substr(0,c)+"/"}return path+b};SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(b,a){this.settings[b]=this.settings[b]==undefined?a:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);if(this.settings.button_image_url!=""){this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}}delete this.ensureDefault};SWFUpload.prototype.loadFlash=function(){var a,b;if(document.getElementById(this.movieName)!==null){throw"ID "+this.movieName+" is already in use. The Flash Object could not be added"}a=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(a==undefined){throw"Could not find the placeholder element: "+this.settings.button_placeholder_id}b=document.createElement("div");b.innerHTML=this.getFlashHTML();a.parentNode.replaceChild(b.firstChild,a);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var b=this.buildParamString();var a=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(a),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var a=this.settings.post_params;var c=[];if(typeof a==="object"){for(var b in a){if(a.hasOwnProperty(b)){c.push(encodeURIComponent(b.toString())+"="+encodeURIComponent(a[b].toString()))}}}return c.join("&amp;")};SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,false);var d=null;d=this.getMovieElement();if(d&&typeof d.CallFunction==="unknown"){for(var a in d){try{if(typeof d[a]==="function"){d[a]=null}}catch(c){}}try{d.parentNode.removeChild(d)}catch(e){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(b){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","	","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","	","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","	","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","	","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","	","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","	","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","	","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","	","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","	","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};SWFUpload.prototype.addSetting=function(c,a,b){if(a==undefined){return this.settings[c]=b}else{return this.settings[c]=a}};SWFUpload.prototype.getSetting=function(a){if(this.settings[a]!=undefined){return this.settings[a]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement();var returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(a){this.callFlash("StartUpload",[a])};SWFUpload.prototype.cancelUpload=function(a,b){if(b!==false){b=true}this.callFlash("CancelUpload",[a,b])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(a){this.callFlash("SetStats",[a])};SWFUpload.prototype.getFile=function(a){if(typeof a==="number"){return this.callFlash("GetFileByIndex",[a])}else{return this.callFlash("GetFile",[a])}};SWFUpload.prototype.addFileParam=function(b,c,a){return this.callFlash("AddFileParam",[b,c,a])};SWFUpload.prototype.removeFileParam=function(a,b){this.callFlash("RemoveFileParam",[a,b])};SWFUpload.prototype.setUploadURL=function(a){this.settings.upload_url=a.toString();this.callFlash("SetUploadURL",[a])};SWFUpload.prototype.setPostParams=function(a){this.settings.post_params=a;this.callFlash("SetPostParams",[a])};SWFUpload.prototype.addPostParam=function(a,b){this.settings.post_params[a]=b;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(a){delete this.settings.post_params[a];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(a,b){this.settings.file_types=a;this.settings.file_types_description=b;this.callFlash("SetFileTypes",[a,b])};SWFUpload.prototype.setFileSizeLimit=function(a){this.settings.file_size_limit=a;this.callFlash("SetFileSizeLimit",[a])};SWFUpload.prototype.setFileUploadLimit=function(a){this.settings.file_upload_limit=a;this.callFlash("SetFileUploadLimit",[a])};SWFUpload.prototype.setFileQueueLimit=function(a){this.settings.file_queue_limit=a;this.callFlash("SetFileQueueLimit",[a])};SWFUpload.prototype.setFilePostName=function(a){this.settings.file_post_name=a;this.callFlash("SetFilePostName",[a])};SWFUpload.prototype.setUseQueryString=function(a){this.settings.use_query_string=a;this.callFlash("SetUseQueryString",[a])};SWFUpload.prototype.setRequeueOnError=function(a){this.settings.requeue_on_error=a;this.callFlash("SetRequeueOnError",[a])};SWFUpload.prototype.setHTTPSuccess=function(a){if(typeof a==="string"){a=a.replace(" ","").split(",")}this.settings.http_success=a;this.callFlash("SetHTTPSuccess",[a])};SWFUpload.prototype.setAssumeSuccessTimeout=function(a){this.settings.assume_success_timeout=a;this.callFlash("SetAssumeSuccessTimeout",[a])};SWFUpload.prototype.setDebugEnabled=function(a){this.settings.debug_enabled=a;this.callFlash("SetDebugEnabled",[a])};SWFUpload.prototype.setButtonImageURL=function(a){if(a==undefined){a=""}this.settings.button_image_url=a;this.callFlash("SetButtonImageURL",[a])};SWFUpload.prototype.setButtonDimensions=function(a,b){this.settings.button_width=a;this.settings.button_height=b;var c=this.getMovieElement();if(c!=undefined){c.style.width=a+"px";c.style.height=b+"px"}this.callFlash("SetButtonDimensions",[a,b])};SWFUpload.prototype.setButtonText=function(a){this.settings.button_text=a;this.callFlash("SetButtonText",[a])};SWFUpload.prototype.setButtonTextPadding=function(b,a){this.settings.button_text_top_padding=a;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,a])};SWFUpload.prototype.setButtonTextStyle=function(a){this.settings.button_text_style=a;this.callFlash("SetButtonTextStyle",[a])};SWFUpload.prototype.setButtonDisabled=function(a){this.settings.button_disabled=a;this.callFlash("SetButtonDisabled",[a])};SWFUpload.prototype.setButtonAction=function(a){this.settings.button_action=a;this.callFlash("SetButtonAction",[a])};SWFUpload.prototype.setButtonCursor=function(a){this.settings.button_cursor=a;this.callFlash("SetButtonCursor",[a])};SWFUpload.prototype.queueEvent=function(c,a){if(a==undefined){a=[]}else{if(!(a instanceof Array)){a=[a]}}var b=this;if(typeof this.settings[c]==="function"){this.eventQueue.push(function(){this.settings[c].apply(this,a)});setTimeout(function(){b.executeNextEvent()},0)}else{if(this.settings[c]!==null){throw"Event handler "+c+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var a=this.eventQueue?this.eventQueue.shift():null;if(typeof a==="function"){a.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(a){var c=/[$]([0-9a-f]{4})/i;var d={};var b;if(a!=undefined){for(var e in a.post){if(a.post.hasOwnProperty(e)){b=e;var f;while((f=c.exec(b))!==null){b=b.replace(f[0],String.fromCharCode(parseInt("0x"+f[1],16)))}d[b]=a.post[e]}}a.post=d}return a};SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(a){return false}};SWFUpload.prototype.flashReady=function(){var a=this.getMovieElement();if(!a){this.debug("Flash called back ready but the flash movie can't be found.");return}this.cleanUp(a);this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(c){try{if(this.movieElement&&typeof c.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var a in c){try{if(typeof c[a]==="function"){c[a]=null}}catch(d){}}}}catch(b){}window.__flash__removeCallback=function(g,e){try{if(g){g[e]=null}}catch(f){}}};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("file_queued_handler",a)};SWFUpload.prototype.fileQueueError=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("file_queue_error_handler",[b,a,c])};SWFUpload.prototype.fileDialogComplete=function(c,a,b){this.queueEvent("file_dialog_complete_handler",[c,a,b])};SWFUpload.prototype.uploadStart=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("return_upload_start_handler",a)};SWFUpload.prototype.returnUploadStart=function(a){var b;if(typeof this.settings.upload_start_handler==="function"){a=this.unescapeFilePostParams(a);b=this.settings.upload_start_handler.call(this,a)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}b=!!b;this.callFlash("ReturnUploadStart",[b])};SWFUpload.prototype.uploadProgress=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_progress_handler",[b,a,c])};SWFUpload.prototype.uploadError=function(b,a,c){b=this.unescapeFilePostParams(b);this.queueEvent("upload_error_handler",[b,a,c])};SWFUpload.prototype.uploadSuccess=function(c,b,a){c=this.unescapeFilePostParams(c);this.queueEvent("upload_success_handler",[c,b,a])};SWFUpload.prototype.uploadComplete=function(a){a=this.unescapeFilePostParams(a);this.queueEvent("upload_complete_handler",a)};SWFUpload.prototype.debug=function(a){this.queueEvent("debug_handler",a)};SWFUpload.prototype.debugMessage=function(a){if(this.settings.debug){var c,b=[];if(typeof a==="object"&&typeof a.name==="string"&&typeof a.message==="string"){for(var d in a){if(a.hasOwnProperty(d)){b.push(d+": "+a[d])}}c=b.join("\n")||"";b=c.split("\n");c="EXCEPTION: "+b.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(c)}else{SWFUpload.Console.writeLine(a)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(b){var d,c;try{d=document.getElementById("SWFUpload_Console");if(!d){c=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(c);d=document.createElement("textarea");d.id="SWFUpload_Console";d.style.fontFamily="monospace";d.setAttribute("wrap","off");d.wrap="off";d.style.overflow="auto";d.style.width="700px";d.style.height="350px";d.style.margin="5px";c.appendChild(d)}d.value+=b+"\n";d.scrollTop=d.scrollHeight-d.clientHeight}catch(a){alert("Exception: "+a.name+" Message: "+a.message)}};(function(f){var d={init:function(b,a){return this.each(function(){var p=f(this);var q=p.clone();var t=f.extend({id:p.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:true,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:true,formData:{},preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},b);var w={assume_success_timeout:t.successTimeout,button_placeholder_id:t.id,button_width:t.width,button_height:t.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:t.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:false,button_cursor:t.buttonCursor=="arrow"?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:t.debug,requeue_on_error:t.requeueErrors,file_post_name:t.fileObjName,file_size_limit:t.fileSizeLimit,file_types:t.fileTypeExts,file_types_description:t.fileTypeDesc,file_queue_limit:t.queueSizeLimit,file_upload_limit:t.uploadLimit,flash_url:t.swf,prevent_swf_caching:t.preventCaching,post_params:t.formData,upload_url:t.uploader,use_query_string:t.method=="get",file_dialog_complete_handler:e.onDialogClose,file_dialog_start_handler:e.onDialogOpen,file_queued_handler:e.onSelect,file_queue_error_handler:e.onSelectError,swfupload_loaded_handler:t.onSWFReady,upload_complete_handler:e.onUploadComplete,upload_error_handler:e.onUploadError,upload_progress_handler:e.onUploadProgress,upload_start_handler:e.onUploadStart,upload_success_handler:e.onUploadSuccess};if(a){w=f.extend(w,a)}w=f.extend(w,t);var c=swfobject.getFlashPlayerVersion();var v=c.major>=9;if(v){window["uploadify_"+t.id]=new SWFUpload(w);var u=window["uploadify_"+t.id];p.data("uploadify",u);var r=f("<div />",{id:t.id,"class":"uploadify",css:{height:t.height+"px",width:t.width+"px"}});f("#"+u.movieName).wrap(r);r=f("#"+t.id);r.data("uploadify",u);var x=f("<div />",{id:t.id+"-button","class":"uploadify-button btn btn-success"+t.buttonClass});if(t.buttonImage){x.css({"background-image":"url('"+t.buttonImage+"')","text-indent":"-9999px"})}x.html('<span class="icon-plus"></span> <span class="uploadify-button-text">'+t.buttonText+"</span>").css({height:t.height+"px",width:t.width+"px"});r.append(x);f("#"+u.movieName).css({position:"absolute","z-index":1});if(!t.queueID){var s=f("<div />",{id:t.id+"-queue","class":"uploadify-queue"});r.after(s);u.settings.queueID=t.id+"-queue";u.settings.defaultQueue=true}u.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"};u.original=q;u.wrapper=r;u.button=x;u.queue=s;if(t.onInit){t.onInit.call(p,u)}}else{if(t.onFallback){t.onFallback.call(p)}}})},cancel:function(c,a){var b=arguments;this.each(function(){var o=f(this),r=o.data("uploadify"),q=r.settings,s=-1;if(b[0]){if(b[0]=="*"){var t=r.queueData.queueLength;f("#"+q.queueID).find(".uploadify-queue-item").each(function(){s++;if(b[1]===true){r.cancelUpload(f(this).attr("id"),false)}else{r.cancelUpload(f(this).attr("id"))}f(this).find(".data").removeClass("data").html(" - 已取消");f(this).find(".progress-bar").remove();f(this).delay(1000+100*s).fadeOut(500,function(){f(this).remove()})});r.queueData.queueSize=0;if(q.onClearQueue){q.onClearQueue.call(o,t)}}else{for(var n=0;n<b.length;n++){r.cancelUpload(b[n]);f("#"+b[n]).find(".data").removeClass("data").html(" - 已取消");f("#"+b[n]).find(".progress-bar").remove();f("#"+b[n]).delay(1000+100*n).fadeOut(500,function(){f(this).remove()})}}}else{var p=f("#"+q.queueID).find(".uploadify-queue-item").get(0);$item=f(p);r.cancelUpload($item.attr("id"));$item.find(".data").removeClass("data").html(" - 已取消");$item.find(".progress-bar").remove();$item.delay(1000).fadeOut(500,function(){f(this).remove()})}})},destroy:function(){this.each(function(){var a=f(this),c=a.data("uploadify"),b=c.settings;c.destroy();if(b.defaultQueue){f("#"+b.queueID).remove()}f("#"+b.id).replaceWith(c.original);if(b.onDestroy){b.onDestroy.call(this)}delete c})},disable:function(a){this.each(function(){var b=f(this),h=b.data("uploadify"),c=h.settings;if(a){h.button.addClass("disabled");if(c.onDisable){c.onDisable.call(this)}}else{h.button.removeClass("disabled");if(c.onEnable){c.onEnable.call(this)}}h.setButtonDisabled(a)})},settings:function(i,b,a){var j=arguments;var c=b;this.each(function(){var h=f(this),n=h.data("uploadify"),m=n.settings;if(typeof j[0]=="object"){for(var g in b){setData(g,b[g])}}if(j.length===1){c=m[i]}else{switch(i){case"uploader":n.setUploadURL(b);break;case"formData":if(!a){b=f.extend(m.formData,b)}n.setPostParams(m.formData);break;case"method":if(b=="get"){n.setUseQueryString(true)}else{n.setUseQueryString(false)}break;case"fileObjName":n.setFilePostName(b);break;case"fileTypeExts":n.setFileTypes(b,m.fileTypeDesc);break;case"fileTypeDesc":n.setFileTypes(m.fileTypeExts,b);break;case"fileSizeLimit":n.setFileSizeLimit(b);break;case"uploadLimit":n.setFileUploadLimit(b);break;case"queueSizeLimit":n.setFileQueueLimit(b);break;case"buttonImage":n.button.css("background-image",settingValue);break;case"buttonCursor":if(b=="arrow"){n.setButtonCursor(SWFUpload.CURSOR.ARROW)}else{n.setButtonCursor(SWFUpload.CURSOR.HAND)}break;case"buttonText":f("#"+m.id+"-button").find(".uploadify-button-text").html(b);break;case"width":n.setButtonDimensions(b,m.height);break;case"height":n.setButtonDimensions(m.width,b);break;case"multi":if(b){n.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES)}else{n.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}break}m[i]=b}});if(j.length===1){return c}},stop:function(){this.each(function(){var a=f(this),b=a.data("uploadify");b.queueData.averageSpeed=0;b.queueData.uploadSize=0;b.queueData.bytesUploaded=0;b.queueData.uploadQueue=[];b.stopUpload()})},upload:function(){var a=arguments;this.each(function(){var c=f(this),h=c.data("uploadify");h.queueData.averageSpeed=0;h.queueData.uploadSize=0;h.queueData.bytesUploaded=0;h.queueData.uploadQueue=[];if(a[0]){if(a[0]=="*"){h.queueData.uploadSize=h.queueData.queueSize;h.queueData.uploadQueue.push("*");h.startUpload()}else{for(var b=0;b<a.length;b++){h.queueData.uploadSize+=h.queueData.files[a[b]].size;h.queueData.uploadQueue.push(a[b])}h.startUpload(h.queueData.uploadQueue.shift())}}else{h.startUpload()}})}};var e={onDialogOpen:function(){var a=this.settings;this.queueData.errorMsg="下列文件未能添加到上传列表:";this.queueData.filesReplaced=0;this.queueData.filesCancelled=0;if(a.onDialogOpen){a.onDialogOpen.call(this)}},onDialogClose:function(h,b,a){var c=this.settings;this.queueData.filesErrored=h-b;this.queueData.filesSelected=h;this.queueData.filesQueued=b-this.queueData.filesCancelled;this.queueData.queueLength=a;if(f.inArray("onDialogClose",c.overrideEvents)<0){if(this.queueData.filesErrored>0){alert(this.queueData.errorMsg)}}if(c.onDialogClose){c.onDialogClose.call(this,this.queueData)}if(c.auto){f("#"+c.id).uploadify("upload","*")}},onSelect:function(o){var n=this.settings;var q={};for(var p in this.queueData.files){q=this.queueData.files[p];if(q.uploaded!=true&&q.name==o.name){var r=confirm('文件 "'+o.name+'" 已在队列中.\n是否替换?');if(!r){this.cancelUpload(o.id);this.queueData.filesCancelled++;return false}else{f("#"+q.id).remove();this.cancelUpload(q.id);this.queueData.filesReplaced++}}}var m=Math.round(o.size/1024);var a="KB";if(m>1000){m=Math.round(m/1000);a="MB"}var b=m.toString().split(".");m=b[0];if(b.length>1){m+="."+b[1].substr(0,2)}m+=a;var c=o.name;if(c.length>25){c=c.substr(0,25)+"..."}if(f.inArray("onSelect",n.overrideEvents)<0){f("#"+n.queueID).append('<div id="'+o.id+'" class="uploadify-queue-item alert alert-success"><div class="close"><a href="javascript:$(\'#'+n.id+"').uploadify('cancel', '"+o.id+'\')"><span>&times;</span></a></div><span class="fileName">'+c+" ("+m+')</span><span class="data"></span><div class="progress progress-striped active"><div class="progress-bar"><!--Progress Bar--></div></div></div>')}this.queueData.queueSize+=o.size;this.queueData.files[o.id]=o;if(n.onSelect){n.onSelect.apply(this,arguments)}},onSelectError:function(h,a,b){var c=this.settings;if(f.inArray("onSelectError",c.overrideEvents)<0){switch(a){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:if(c.queueSizeLimit>b){this.queueData.errorMsg+="\n选择的文件数超过了限制("+b+")."}else{this.queueData.errorMsg+="\n选择的文件数超过了限制("+c.queueSizeLimit+")."}break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\n文件"'+h.name+'"大小超过限制('+c.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\n文件"'+h.name+'"无效.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\n文件"'+h.name+'"为不允许的类型('+c.fileTypeDesc+").";break}}if(a!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED){delete this.queueData.files[h.id]}if(c.onSelectError){c.onSelectError.apply(this,arguments)}},onQueueComplete:function(){if(this.settings.onQueueComplete){this.settings.onQueueComplete.call(this,this.settings.queueData)}},onUploadComplete:function(b){var a=this.settings,h=this;var c=this.getStats();this.queueData.queueLength=c.files_queued;if(this.queueData.uploadQueue[0]=="*"){if(this.queueData.queueLength>0){this.startUpload()}else{this.queueData.uploadQueue=[];if(a.onQueueComplete){a.onQueueComplete.call(this,this.queueData)}}}else{if(this.queueData.uploadQueue.length>0){this.startUpload(this.queueData.uploadQueue.shift())}else{this.queueData.uploadQueue=[];if(a.onQueueComplete){a.onQueueComplete.call(this,this.queueData)}}}if(f.inArray("onUploadComplete",a.overrideEvents)<0){if(a.removeCompleted){switch(b.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){if(f("#"+b.id)){h.queueData.queueSize-=b.size;delete h.queueData.files[b.id];f("#"+b.id).fadeOut(500,function(){f(this).remove()})}},a.removeTimeout*1000);break;case SWFUpload.FILE_STATUS.ERROR:if(!a.requeueErrors){setTimeout(function(){if(f("#"+b.id)){h.queueData.queueSize-=b.size;delete h.queueData.files[b.id];f("#"+b.id).fadeOut(500,function(){f(this).remove()})}},a.removeTimeout*1000)}break}}else{b.uploaded=true}}if(a.onUploadComplete){a.onUploadComplete.call(this,b)}},onUploadError:function(k,a,b){var j=this.settings;var c="Error";switch(a){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:c="HTTP Error ("+b+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:c="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:c="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:c="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("已达到单次最大上传数限制("+b+").");c="超过上传限制";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:c="失败";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:c="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:c="已取消";this.queueData.queueSize-=k.size;if(k.status==SWFUpload.FILE_STATUS.IN_PROGRESS||f.inArray(k.id,this.queueData.uploadQueue)>=0){this.queueData.uploadSize-=k.size}if(j.onCancel){j.onCancel.call(this,k)}delete this.queueData.files[k.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:c="已停止";break}if(f.inArray("onUploadError",j.overrideEvents)<0){if(a!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&a!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED){f("#"+k.id).addClass("uploadify-error")}f("#"+k.id).find(".progress-bar").css("width","1px");if(a!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&k.status!=SWFUpload.FILE_STATUS.COMPLETE){f("#"+k.id).find(".data").html(" - "+c)}}var l=this.getStats();this.queueData.uploadsErrored=l.upload_errors;if(j.onUploadError){j.onUploadError.call(this,k,a,b,c)}},onUploadProgress:function(w,q,t){var v=this.settings;var y=new Date();var c=y.getTime();var s=c-this.timer;if(s>500){this.timer=c}var u=q-this.bytesLoaded;this.bytesLoaded=q;var z=this.queueData.queueBytesUploaded+q;var a=Math.round(q/t*100);var b="KB/s";var r=0;var x=u/1024/(s/1000);x=Math.floor(x*10)/10;if(this.queueData.averageSpeed>0){this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+x)/2)}else{this.queueData.averageSpeed=Math.floor(x)}if(x>1000){r=x*0.001;this.queueData.averageSpeed=Math.floor(r);b="MB/s"}if(f.inArray("onUploadProgress",v.overrideEvents)<0){if(v.progressData=="percentage"){f("#"+w.id).find(".data").html(" - "+a+"%")}else{if(v.progressData=="speed"&&s>500){f("#"+w.id).find(".data").html(" - "+this.queueData.averageSpeed+b)}}f("#"+w.id).find(".progress-bar").css("width",a+"%")}if(v.onUploadProgress){v.onUploadProgress.call(this,w,q,t,z,this.queueData.uploadSize)}},onUploadStart:function(c){var b=this.settings;var a=new Date();this.timer=a.getTime();this.bytesLoaded=0;if(this.queueData.uploadQueue.length==0){this.queueData.uploadSize=c.size}if(b.checkExisting){f.ajax({type:"POST",async:false,url:b.checkExisting,data:{filename:c.name},success:function(i){if(i==1){var j=confirm('"'+c.name+'"已存在于服务器上，是否要覆盖?');if(!j){this.cancelUpload(c.id);f("#"+c.id).remove();if(this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0){if(this.queueData.uploadQueue[0]=="*"){this.startUpload()}else{this.startUpload(this.queueData.uploadQueue.shift())}}}}}})}if(b.onUploadStart){b.onUploadStart.call(this,c)}},onUploadSuccess:function(c,a,j){var b=this.settings;var i=this.getStats();this.queueData.uploadsSuccessful=i.successful_uploads;this.queueData.queueBytesUploaded+=c.size;if(f.inArray("onUploadSuccess",b.overrideEvents)<0){f("#"+c.id).find(".data").html(" - 上传成功")}if(b.onUploadSuccess){b.onUploadSuccess.call(this,c,a,j)}}};f.fn.uploadify=function(a){if(d[a]){return d[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof a==="object"||!a){return d.init.apply(this,arguments)}else{f.error("The method "+a+" does not exist in $.uploadify")}}}})($);
